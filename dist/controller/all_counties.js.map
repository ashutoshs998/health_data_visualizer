{"version":3,"sources":["../../src/controller/all_counties.js"],"names":["module","exports","counties","req","res","next","Diabetes_Prevalence","findAll","attributes","fn","col","then","data","json","error","message","catch","err","search_county","where","county","$like","body","add_fav","fav_county","find","exist","create","result","get_fav","get_data_by_county","Diabetes_Incidence","year","Diabetes_Prevalence_by_Sex","Inactivity_Prevalence","Inactivity_Prevalence_by_Sex","Obesity_Prevalence","Obesity_Prevalence_by_Sex","get_chart"],"mappings":"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","file":"all_counties.js","sourcesContent":["import db from '../db';\nimport Sequelize from \"sequelize\";\n\nmodule.exports = {\n\n    counties: (req, res, next) => {\n        db.Diabetes_Prevalence.findAll({\n            attributes: [\n                [Sequelize.fn('DISTINCT', Sequelize.col('county')), 'county'],\n            ],\n        }).then((data) => {\n            res.json({ error: 0, message: \"counties fetched\", data: data })\n        }).catch(err => next(err))\n    },\n\n    search_county: (req, res, next) => {\n        db.Diabetes_Prevalence.findAll({\n            where: { county: { $like: '%' + req.body.county + '%' } },\n            attributes: [\n                [Sequelize.fn('DISTINCT', Sequelize.col('county')), 'county'],\n            ],\n        }).then((data) => {\n            res.json({ error: 0, message: \"counties found\", data: data })\n        }).catch(err => next(err))\n    },\n\n    add_fav: (req, res, next) => {\n        db.fav_county.find({ county: req.body.county }).then((exist) => {\n            if (exist) {\n                res.json({ error: 1, message: \"already exist in favourite list\" })\n            } else {\n                db.fav_county.create({\n                    county: req.body.county\n                }).then((data) => {\n                    res.json({ error: 0, message: \"county added to favourites\", result: data })\n                }).catch(err => next(err));\n            }\n        })\n    },\n\n    get_fav: (req, res, next) => {\n        db.fav_county.findAll({}).then((fav_county) => {\n            res.json({ error: 0, message: \"favourite counties\", data: fav_county });\n        })\n    },\n\n    get_data_by_county: (req, res, next) => {\n        db.Diabetes_Incidence.findAll({ where: { county: req.body.county, year: 2013 } }).then((Diabetes_Incidence) => {\n            db.Diabetes_Prevalence.findAll({ where: { county: req.body.county, year: 2013 } }).then((Diabetes_Prevalence) => {\n                db.Diabetes_Prevalence_by_Sex.findAll({ where: { county: req.body.county, year: 2013 } }).then((Diabetes_Prevalence_by_Sex) => {\n                    db.Inactivity_Prevalence.findAll({ where: { county: req.body.county, year: 2013 } }).then((Inactivity_Prevalence) => {\n                        db.Inactivity_Prevalence_by_Sex.findAll({ where: { county: req.body.county, year: 2013 } }).then((Inactivity_Prevalence_by_Sex) => {\n                            db.Obesity_Prevalence.findAll({ where: { county: req.body.county, year: 2013 } }).then((Obesity_Prevalence) => {\n                                db.Obesity_Prevalence_by_Sex.findAll({ where: { county: req.body.county, year: 2013 } }).then((Obesity_Prevalence_by_Sex) => {\n                                    res.json({\n                                        error: 0,\n                                        message: \"data fetched by county\",\n                                        Diabetes_Incidence: Diabetes_Incidence,\n                                        Diabetes_Prevalence,\n                                        Diabetes_Prevalence_by_Sex,\n                                        Inactivity_Prevalence,\n                                        Inactivity_Prevalence_by_Sex,\n                                        Obesity_Prevalence,\n                                        Obesity_Prevalence_by_Sex\n                                    })\n                                })\n                            })\n                        })\n                    })\n                })\n            })\n        }).catch(err => next(err));\n    },\n\n    get_chart: (req, res, next) => {\n        db.Diabetes_Incidence.findAll({ where: { county: req.body.county } }).then((Diabetes_Incidence) => {\n            db.Diabetes_Prevalence.findAll({ where: { county: req.body.county } }).then((Diabetes_Prevalence) => {\n                db.Diabetes_Prevalence_by_Sex.findAll({ where: { county: req.body.county } }).then((Diabetes_Prevalence_by_Sex) => {\n                    db.Inactivity_Prevalence.findAll({ where: { county: req.body.county } }).then((Inactivity_Prevalence) => {\n                        db.Inactivity_Prevalence_by_Sex.findAll({ where: { county: req.body.county } }).then((Inactivity_Prevalence_by_Sex) => {\n                            db.Obesity_Prevalence.findAll({ where: { county: req.body.county } }).then((Obesity_Prevalence) => {\n                                db.Obesity_Prevalence_by_Sex.findAll({ where: { county: req.body.county } }).then((Obesity_Prevalence_by_Sex) => {\n                                    res.json({\n                                        error: 0,\n                                        message: \"data fetched by county\",\n                                        Diabetes_Incidence: Diabetes_Incidence,\n                                        Diabetes_Prevalence,\n                                        Diabetes_Prevalence_by_Sex,\n                                        Inactivity_Prevalence,\n                                        Inactivity_Prevalence_by_Sex,\n                                        Obesity_Prevalence,\n                                        Obesity_Prevalence_by_Sex\n                                    })\n                                })\n                            })\n                        })\n                    })\n                })\n            })\n        }).catch(err => next(err));\n    }\n}"]}